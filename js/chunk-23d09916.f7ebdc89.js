(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23d09916"],{"36f5":function(e,t,r){},"7b9b":function(e,t,r){},a55b:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"logBox"}},[r("div",{class:e.control},[r("div",{staticClass:"logContainer_from logContainer--signup"},[r("div",{ref:"form",staticClass:"from1",attrs:{id:"from1"}},[r("div",{staticClass:"registerBox"},[r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerFules}},[r("h2",{staticClass:"from_title",staticStyle:{"text-align":"center"}},[e._v("注册账号")]),r("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),r("el-step",{attrs:{title:"邮箱验证"}})],1),r("el-tabs",{attrs:{"tab-position":"bottom"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{name:"1"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",size:"large",placeholder:"请输入用户名(只能为数字)",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",size:"large",placeholder:"请输入密码","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{prop:"confirm"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",size:"large",placeholder:"请确认密码","show-password":""},model:{value:e.registerForm.confirm,callback:function(t){e.$set(e.registerForm,"confirm",t)},expression:"registerForm.confirm"}})],1),r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.next}},[e._v("下一步")])],1),r("el-tab-pane",{attrs:{name:"2"}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{staticStyle:{"margin-top":"5px"},attrs:{"prefix-icon":"el-icon-message",size:"large",placeholder:"请输入邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),r("el-form-item",{attrs:{prop:"yzm"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入验证码"},model:{value:e.registerForm.yzm,callback:function(t){e.$set(e.registerForm,"yzm",t)},expression:"registerForm.yzm"}},[r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{slot:"append"},on:{click:e.getCode},slot:"append"},[e._v("获取验证码")])],1)],1),r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.register}},[e._v("注册")]),r("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.previous}},[e._v("上一步")])],1)],1)],1)],1)])]),r("div",{staticClass:"logContainer_from logContainer--signin"},[r("el-form",{ref:"form",staticClass:"from",attrs:{model:e.form,id:"from2"}},[r("h2",{staticClass:"from_title"},[e._v("欢迎登录")]),r("el-form-item",{staticClass:"input",attrs:{prop:"username"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",size:"large",placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{staticClass:"input",attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",size:"large",placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("a",{staticClass:"link",attrs:{href:"#"}},[e._v("忘记密码？")]),r("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.login}},[e._v("登录")])],1)],1),r("div",{staticClass:"logContainer_overlay"},[r("div",{staticClass:"overlay"},[r("div",{staticClass:"overlay_panel overlay--left"},[r("button",{staticClass:"btn",attrs:{id:"signin"},on:{click:e.goLogin}},[e._v("已有账号，直接登录")])]),r("div",{staticClass:"overlay_panel overlay--right"},[r("button",{staticClass:"btn",attrs:{id:"signup"},on:{click:e.goRegisetr}},[e._v("没有账号，点击注册")])])])])])])},i=[],a=(r("36f5"),r("a78e"),{name:"login",components:{},data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.registerForm.password?s(new Error("两次输入密码不一致!")):s()},r=function(e,t,r){var s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(s.test(t))return r();r(new Error("请输入合法的验证码"))},s=function(t,r,s){e.$http.get("/user/queryAvailable/"+r).then((function(t){t.data.result||(s(new Error("用户名以存在")),e.registerForm.username="")}))};return{registerForm:{username:"",password:"",confirm:"",email:"",yzm:""},loading:!1,confirm:"",form:{username:"",password:""},control:"logContainer right-panel-active",active:1,activeName:"1",time:"",code:"",registerFules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:6,max:9,message:"用户名长度要在6到9位",trigger:"blur"},{validator:s,trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:13,message:"密码长度要在6到13位",trigger:"blur"}],confirm:[{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:r,trigger:"blur"}],yzm:[{required:!0,message:"验证码不能为空",trigger:"blur"},{min:6,max:6,message:"验证码长度要在6位",trigger:"blur"}]}}},created:function(){},mounted:function(){},methods:{next:function(){var e=this.registerForm,t=e.username,r=e.password,s=e.confirm;t&&r&&s?(this.active++>2&&(this.active=1),this.activeName=this.active+""):this.$refs["form"].validateField(["username","password","confirm"])},previous:function(){this.active--<1&&(this.active=1),this.activeName=this.active+""},register:function(){var e=this,t=this.registerForm,r=t.email,s=t.yzm;if(r&&s)if(this.registerForm.yzm===this.code){var i=(new Date).getTime();i<=this.time?this.$http.post("/user/register",this.registerForm).then((function(t){t.data.result?(e.$message.success("注册成功"),e.registerForm={},e.goLogin(),e.active=1,e.activeName="1"):e.$message.error("注册失败")})):this.$message.error("验证码以失效！")}else this.$message.error("验证码不正确！");else this.$refs["form"].validateField(["email","yzm"])},login:function(){var e=this;this.$http.post("/user/login",this.form).then((function(t){if(t.data.result){e.$message.success(t.data.message);var r=JSON.stringify(t.data.data.user);sessionStorage.setItem("user",r),e.$router.go(-1),e.$store.commit("changIsSignIn",1)}else e.$message.error(t.data.message)}))},goLogin:function(){this.control="logContainer"},goRegisetr:function(){this.control="logContainer right-panel-active"},getCode:function(){var e=this;this.loading=!0,""===this.registerForm.email?this.$message.error("请先输入邮箱"):this.$http.post("/user/sendEmail/"+this.registerForm.email).then((function(t){e.loading=!1,e.time=(new Date).getTime()+6e4,e.code=t.data.data.s,t.data.result?e.$message.success("验证码已发送至邮箱,如果想再次发送请等待一分钟！否则验证码将被覆盖。"):e.$message.error("验证码发送失败")}))}}}),o=a,n=(r("df9b"),r("2877")),l=Object(n["a"])(o,s,i,!1,null,"f75c098e",null);t["default"]=l.exports},df9b:function(e,t,r){"use strict";r("7b9b")}}]);
//# sourceMappingURL=chunk-23d09916.f7ebdc89.js.map