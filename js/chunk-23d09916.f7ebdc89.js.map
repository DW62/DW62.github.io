{"version":3,"sources":["webpack:///./src/views/Login.vue?d438","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?09c2","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?f9c8"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","class","control","staticClass","ref","registerForm","registerFules","staticStyle","_v","active","model","value","callback","$$v","activeName","expression","$set","on","next","directives","name","rawName","getCode","slot","register","previous","form","login","goLogin","goRegisetr","staticRenderFns","components","data","Error","regEmail","test","username","password","confirm","email","yzm","loading","time","code","created","mounted","methods","$refs","validateField","$http","post","$message","error","sessionStorage","setItem","component"],"mappings":"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","file":"js/chunk-23d09916.f7ebdc89.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"logBox\"}},[_c('div',{class:_vm.control},[_c('div',{staticClass:\"logContainer_from logContainer--signup\"},[_c('div',{ref:\"form\",staticClass:\"from1\",attrs:{\"id\":\"from1\"}},[_c('div',{staticClass:\"registerBox\"},[_c('el-form',{ref:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.registerFules}},[_c('h2',{staticClass:\"from_title\",staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"注册账号\")]),_c('el-steps',{attrs:{\"active\":_vm.active,\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"邮箱验证\"}})],1),_c('el-tabs',{attrs:{\"tab-position\":\"bottom\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"name\":\"1\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user-solid\",\"size\":\"large\",\"placeholder\":\"请输入用户名(只能为数字)\",\"oninput\":\"value=value.replace(/[^\\\\d]/g,'')\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"size\":\"large\",\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"confirm\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"size\":\"large\",\"placeholder\":\"请确认密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.confirm),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirm\", $$v)},expression:\"registerForm.confirm\"}})],1),_c('el-button',{staticStyle:{\"margin-top\":\"12px\"},on:{\"click\":_vm.next}},[_vm._v(\"下一步\")])],1),_c('el-tab-pane',{attrs:{\"name\":\"2\"}},[_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{staticStyle:{\"margin-top\":\"5px\"},attrs:{\"prefix-icon\":\"el-icon-message\",\"size\":\"large\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"yzm\"}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.registerForm.yzm),callback:function ($$v) {_vm.$set(_vm.registerForm, \"yzm\", $$v)},expression:\"registerForm.yzm\"}},[_c('el-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"slot\":\"append\"},on:{\"click\":_vm.getCode},slot:\"append\"},[_vm._v(\"获取验证码\")])],1)],1),_c('el-button',{staticStyle:{\"margin-top\":\"12px\"},on:{\"click\":_vm.register}},[_vm._v(\"注册\")]),_c('el-button',{staticStyle:{\"margin-top\":\"12px\"},on:{\"click\":_vm.previous}},[_vm._v(\"上一步\")])],1)],1)],1)],1)])]),_c('div',{staticClass:\"logContainer_from logContainer--signin\"},[_c('el-form',{ref:\"form\",staticClass:\"from\",attrs:{\"model\":_vm.form,\"id\":\"from2\"}},[_c('h2',{staticClass:\"from_title\"},[_vm._v(\"欢迎登录\")]),_c('el-form-item',{staticClass:\"input\",attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user-solid\",\"size\":\"large\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{staticClass:\"input\",attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"size\":\"large\",\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('a',{staticClass:\"link\",attrs:{\"href\":\"#\"}},[_vm._v(\"忘记密码？\")]),_c('button',{staticClass:\"btn\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1),_c('div',{staticClass:\"logContainer_overlay\"},[_c('div',{staticClass:\"overlay\"},[_c('div',{staticClass:\"overlay_panel overlay--left\"},[_c('button',{staticClass:\"btn\",attrs:{\"id\":\"signin\"},on:{\"click\":_vm.goLogin}},[_vm._v(\"已有账号，直接登录\")])]),_c('div',{staticClass:\"overlay_panel overlay--right\"},[_c('button',{staticClass:\"btn\",attrs:{\"id\":\"signup\"},on:{\"click\":_vm.goRegisetr}},[_vm._v(\"没有账号，点击注册\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--登录组件-->\r\n<template>\r\n  <div id=\"logBox\">\r\n    <!--整体布局-->\r\n    <div :class=\"control\">\r\n      <!--注册框-->\r\n      <div class=\"logContainer_from logContainer--signup\" >\r\n        <div ref=\"form\"  class=\"from1\" id=\"from1\">\r\n          <div class=\"registerBox\">\r\n            <el-form ref=\"registerForm\" :model=\"registerForm\" :rules=\"registerFules\">\r\n              <h2 class=\"from_title\" style=\"text-align:center \">注册账号</h2>\r\n              <el-steps :active=\"active\" finish-status=\"success\" align-center>\r\n                <el-step title=\"基本信息\"></el-step>\r\n                <el-step title=\"邮箱验证\"></el-step>\r\n              </el-steps>\r\n\r\n              <el-tabs v-model=\"activeName\" tab-position=\"bottom\">\r\n                <el-tab-pane  name=\"1\">\r\n                  <el-form-item  prop=\"username\">\r\n                    <el-input   prefix-icon=\"el-icon-user-solid\" size=\"large\"\r\n                                placeholder=\"请输入用户名(只能为数字)\" v-model=\"registerForm.username\"\r\n                                oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n\r\n                    >\r\n                    </el-input>\r\n                  </el-form-item>\r\n                  <el-form-item  prop=\"password\">\r\n                    <el-input  prefix-icon=\"el-icon-lock\" size=\"large\" placeholder=\"请输入密码\" v-model=\"registerForm.password\" show-password ></el-input>\r\n                  </el-form-item>\r\n\r\n                  <el-form-item  prop=\"confirm\">\r\n                    <el-input  prefix-icon=\"el-icon-lock\" size=\"large\" placeholder=\"请确认密码\" v-model=\"registerForm.confirm\" show-password ></el-input>\r\n                  </el-form-item>\r\n                  <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\r\n                </el-tab-pane>\r\n                <el-tab-pane  name=\"2\">\r\n                  <el-form-item  prop=\"email\">\r\n                    <el-input  prefix-icon=\"el-icon-message\" size=\"large\" placeholder=\"请输入邮箱\" v-model=\"registerForm.email\" style=\"margin-top:5px \"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item  prop=\"yzm\">\r\n                    <el-input placeholder=\"请输入验证码\"  class=\"input-with-select\" v-model=\"registerForm.yzm\">\r\n                      <el-button slot=\"append\" @click=\"getCode\" v-loading=\"loading\">获取验证码</el-button>\r\n                    </el-input>\r\n                  </el-form-item>\r\n                  <el-button style=\"margin-top: 12px;\" @click=\"register\" >注册</el-button>\r\n                  <el-button style=\"margin-top: 12px;\" @click=\"previous\">上一步</el-button>\r\n                </el-tab-pane>\r\n              </el-tabs>\r\n\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--登录框-->\r\n      <div class=\"logContainer_from logContainer--signin\" >\r\n        <el-form ref=\"form\" :model=\"form\" class=\"from\" id=\"from2\">\r\n          <h2 class=\"from_title\">欢迎登录</h2>\r\n          <el-form-item prop=\"username\" class=\"input\" >\r\n            <el-input   prefix-icon=\"el-icon-user-solid\" size=\"large\" placeholder=\"请输入用户名\" v-model=\"form.username\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\" class=\"input\">\r\n            <el-input  prefix-icon=\"el-icon-lock\" size=\"large\" placeholder=\"请输入密码\" v-model=\"form.password\" show-password></el-input>\r\n          </el-form-item>\r\n          <a href=\"#\" class=\"link\">忘记密码？</a>\r\n\r\n          <button type=\"button\" class=\"btn\" @click=\"login\">登录</button>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!--跳转按钮-->\r\n      <div class=\"logContainer_overlay\">\r\n        <div class=\"overlay\">\r\n          <div class=\"overlay_panel overlay--left\">\r\n            <button class=\"btn\" id=\"signin\" @click=\"goLogin\">已有账号，直接登录</button>\r\n          </div>\r\n          <div class=\"overlay_panel overlay--right\">\r\n            <button class=\"btn\" id=\"signup\" @click=\"goRegisetr\">没有账号，点击注册</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '../assets/scss/main.css'\r\nimport Cookie from \"js-cookie\";\r\n\r\nexport default {\r\n  name: \"login\",\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    //自定义重复密码校验规则\r\n    let validatePass2 = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请再次输入密码'));\r\n      } else if (value !== this.registerForm.password) {\r\n        callback(new Error('两次输入密码不一致!'));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    //自定义邮箱验证\r\n    let checkEmail = (rule, value, callback) => {\r\n      const regEmail = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      if (regEmail.test(value)) {\r\n        return callback();\r\n      }\r\n      callback(new Error(\"请输入合法的验证码\"));\r\n    };\r\n    //判断用户名是否存在\r\n    let a=(rule, value, callback)=>{\r\n      this.$http.get(\"/user/queryAvailable/\"+value).then(res=>{\r\n        if(!res.data.result) {\r\n          callback(new Error('用户名以存在'));\r\n          this.registerForm.username = \"\"\r\n        }\r\n      })\r\n    }\r\n    return {\r\n      registerForm:{\r\n        username:'',\r\n        password:'',//密码\r\n        confirm:'',//确认密码\r\n        email:'',\r\n        yzm:'',//验证码\r\n      },//注册表单\r\n      loading:false,//设置按钮加载状态\r\n      confirm:'',//确认密码\r\n      form:{\r\n        username:'',\r\n        password:''\r\n      },\r\n      control: \"logContainer right-panel-active\", //控制表单内容\r\n      active: 1,\r\n      activeName: \"1\",\r\n      time:'',//获取验证码的时间\r\n      code:'',//获取到的验证码\r\n      //注册校验规则\r\n      registerFules: {\r\n        username: [\r\n          {required: true, message: '用户名不能为空', trigger: 'blur',},\r\n          {min: 6, max: 9, message: '用户名长度要在6到9位', trigger: 'blur',},\r\n          { validator: a, trigger: \"blur\" },\r\n        ],\r\n        password: [\r\n          {required: true, message: '密码不能为空', trigger: 'blur',},\r\n          {min: 6, max: 13, message: '密码长度要在6到13位', trigger: 'blur',},\r\n        ],\r\n        confirm: [\r\n          { validator: validatePass2, trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" },\r\n        ],\r\n        yzm: [\r\n          {required: true, message: '验证码不能为空', trigger: 'blur',},\r\n          {min: 6, max: 6, message: '验证码长度要在6位', trigger: 'blur',},\r\n        ],\r\n      }\r\n    }\r\n  },\r\n//页面加载\r\n  created() {\r\n  },\r\n//可以访问DOM元素\r\n  mounted() {\r\n  },\r\n//方法集合\r\n  methods: {\r\n    //下一步方法\r\n    next() {\r\n      const { username, password, confirm } = this.registerForm\r\n      if ( username && password && confirm) {\r\n        //执行校验成功的相关操作\r\n        if (this.active++ > 2) this.active = 1;\r\n        this.activeName=this.active+''\r\n      } else {\r\n        this.$refs['form'].validateField(['username', 'password', 'confirm'])\r\n      }\r\n    },\r\n    //上一步方法\r\n    previous(){\r\n      if (this.active-- < 1) this.active = 1;\r\n      this.activeName=this.active+''\r\n    },\r\n    //注册方法\r\n    register(){\r\n      const { email, yzm } = this.registerForm\r\n      if ( email && yzm ) {\r\n        if(this.registerForm.yzm===this.code){\r\n          let a = new Date().getTime()\r\n          if(a<=this.time){\r\n            //执行校验成功的相关操作\r\n            this.$http.post(\"/user/register\",this.registerForm).then(res=>{\r\n              if(res.data.result){\r\n                this.$message.success(\"注册成功\")\r\n                this.registerForm={}\r\n                //切换到登录\r\n                this.goLogin()\r\n                this.active=1\r\n                this.activeName=\"1\"\r\n              }else {\r\n                this.$message.error(\"注册失败\")\r\n              }\r\n            })\r\n          }else {\r\n            this.$message.error(\"验证码以失效！\")\r\n          }\r\n        }else {\r\n          this.$message.error(\"验证码不正确！\")\r\n        }\r\n      } else {\r\n        this.$refs['form'].validateField(['email', 'yzm'])\r\n      }\r\n    },\r\n    //登录方法\r\n    login(){\r\n      this.$http.post(\"/user/login\",this.form).then(res=>{\r\n        if(res.data.result){\r\n          this.$message.success(res.data.message)\r\n          //将用户信息存入浏览器\r\n          const user=JSON.stringify(res.data.data.user)\r\n          sessionStorage.setItem(\"user\",user)\r\n          this.$router.go(-1)\r\n\r\n            // 登录成功，去vuex里修改登录状态\r\n            this.$store.commit('changIsSignIn',1)\r\n            // // 设置Cookie\r\n            // Cookie.set('token',res.data.token)\r\n            // // 设置vuex里的token\r\n            // this.$store.commit('setToken',res.data.token)\r\n            // console.log(this.$store.state.token);\r\n            // this.$router.push({name:'home'})\r\n            // setTimeout(() => {\r\n            //   this.loading = false\r\n            // },1000)\r\n\r\n        }else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    },\r\n    //切换表单为登录\r\n    goLogin(){\r\n      this.control=\"logContainer\"\r\n    },\r\n    //切换表单为注册\r\n    goRegisetr(){\r\n      this.control=\"logContainer right-panel-active\"\r\n    },\r\n    //获取验证码\r\n    getCode(){\r\n      this.loading=true\r\n      if(this.registerForm.email===\"\"){\r\n        this.$message.error(\"请先输入邮箱\")\r\n      }else {\r\n        this.$http.post(\"/user/sendEmail/\"+this.registerForm.email).then(res=>{\r\n          this.loading=false\r\n          this.time=new Date().getTime()+1000*60\r\n          this.code=res.data.data.s\r\n          if(!res.data.result){\r\n            this.$message.error(\"验证码发送失败\")\r\n          }else {\r\n            this.$message.success(\"验证码已发送至邮箱,如果想再次发送请等待一分钟！否则验证码将被覆盖。\")\r\n          }\r\n        })\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.from1{\r\nheight: 100%;\r\n  background: #e9e9e9;\r\n}\r\n.registerBox{\r\n  width: 80%;\r\n  height: 80%;\r\n  margin: 20px auto;\r\n}\r\n\r\n</style>\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=f75c098e&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=f75c098e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f75c098e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=f75c098e&scoped=true&lang=css&\""],"sourceRoot":""}