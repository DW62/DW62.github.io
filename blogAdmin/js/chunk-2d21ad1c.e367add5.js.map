{"version":3,"sources":["webpack:///./src/components/about/index.vue?116d","webpack:///src/components/about/index.vue","webpack:///./src/components/about/index.vue?2b4e","webpack:///./src/components/about/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","form","rules","staticStyle","model","value","callback","$$v","$set","expression","avatar","on","open","_v","$event","submitForm","go","dialogVisible","imgUpload","slot","staticRenderFns","name","components","data","id","email","nickname","created","loadUser","mounted","methods","$refs","formName","validate","valid","console","log","request","sessionStorage","setItem","window","history","length","$router","push","user","message","type","offset","component"],"mappings":"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","file":"js/chunk-2d21ad1c.e367add5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickname\"}},[_c('el-input',{staticStyle:{\"width\":\"30%\"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{staticStyle:{\"width\":\"30%\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"头像\",\"prop\":\"avatar\"}},[_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":_vm.form.avatar,\"preview-src-list\":[_vm.form.avatar]}}),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.open}},[_vm._v(\"更换头像\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"修改\")]),_c('el-button',{on:{\"click\":_vm.go}},[_vm._v(\"返回\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"上传图片\",\"visible\":_vm.dialogVisible,\"append-to-body\":true,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"http://39.105.29.9:9090/files/ossUpload\",\"on-success\":_vm.imgUpload,\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--个人信息组件-->\r\n<template>\r\n  <div class=\"\">\r\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n      <el-form-item label=\"昵称\" prop=\"nickname\">\r\n        <el-input v-model=\"form.nickname\" style=\"width: 30%\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"form.email\" style=\"width: 30%\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"头像\" prop=\"avatar\">\r\n        <el-image\r\n            style=\"width: 100px; height: 100px\"\r\n            :src=\"form.avatar\"\r\n            :preview-src-list=\"[form.avatar]\">\r\n        </el-image>\r\n        <el-button type=\"primary\" @click=\"open\" size=\"mini\">更换头像</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">修改</el-button>\r\n        <el-button @click=\"go\">返回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!--弹出层-->\r\n    <el-dialog title=\"上传图片\" :visible.sync=\"dialogVisible\" :append-to-body=\"true\" width=\"400px\">\r\n      <el-upload\r\n          class=\"upload-demo\"\r\n          drag\r\n          action=\"http://39.105.29.9:9090/files/ossUpload\"\r\n          :on-success=\"imgUpload\"\r\n          multiple>\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"../../utils/request\";\r\n\r\nexport default {\r\n  name: \"aboutIndex\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      dialogVisible:false,//弹出层\r\n      form: {\r\n        id:'',\r\n        avatar: \"https://mydwblog.oss-cn-shanghai.aliyuncs.com/2021/10/11/6350f69b77e745e2927e255b97a5e9c7.png\",//头像\r\n        email: \"1124279871@qq.com\",//邮箱\r\n        nickname: \"admin\",//昵称\r\n      },\r\n      rules: {\r\n        nickname: [\r\n          {required: true, message: '请输入昵称', trigger: 'blur'},\r\n        ],\r\n        email: [\r\n          {required: true, message: '请输入邮箱', trigger: 'blur'},\r\n        ],\r\n        avatar: [\r\n          {required: true, message: '头像不能为空', trigger: 'blur'},\r\n        ],\r\n      }\r\n    }\r\n  },\r\n//页面加载\r\n  created() {\r\n    this.loadUser()\r\n  },\r\n//可以访问DOM元素\r\n  mounted() {\r\n  },\r\n//方法集合\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          request.post(\"/user/postUserById\",this.form).then(res=>{\r\n            if(res.data.result){\r\n              this.$message.success(\"修改成功\")\r\n              //将用户信息存入浏览器\r\n              sessionStorage.setItem(\"user\",JSON.stringify(res.data.data.user))\r\n            }else {\r\n              this.$message.success(\"修改失败\")\r\n            }\r\n          })\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //获取用户信息\r\n    loadUser(){\r\n      this.form=JSON.parse(sessionStorage.getItem(\"user\"))\r\n    },\r\n    //点击更换图片打开弹出层\r\n    //返回方法\r\n    go(){\r\n      if (window.history.length <= 1) {\r\n        this.$router.push({path:'/'})\r\n        return false\r\n      } else {\r\n        this.$router.go(-1)\r\n      }\r\n    },\r\n    open(){\r\n      //打开弹出层\r\n      this.dialogVisible=true\r\n    },\r\n    //图片上传成功触发的方法\r\n    imgUpload(response,file,fileList){\r\n      //关闭弹框\r\n      this.dialogVisible=false\r\n      //刷新数据\r\n      this.form.avatar=file.response.data.url\r\n      request.post('/user/postUserById',this.form).then(res => {\r\n        if(res.data.result){\r\n          const user=JSON.parse(sessionStorage.getItem(\"user\"))\r\n          user.avatar=this.form.avatar\r\n          //将用户信息存入浏览器\r\n          sessionStorage.setItem(\"user\",JSON.stringify(user))\r\n          this.loadUser()\r\n          this.$router.go(0)\r\n        }else {\r\n          this.$message({\r\n            message: '服务器故障请稍后在修改',\r\n            type: 'warning',\r\n            offset:80\r\n          });\r\n        }\r\n\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=17ccff86&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17ccff86\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}